<ion-content [fullscreen]="true" class="fondo">

  <!-- MENSAJES -->
  <ion-text color="danger" *ngIf="mensajeError">
    <p class="ion-padding">{{ mensajeError }}</p>
  </ion-text>

  <ion-text color="success" *ngIf="mensajeOk">
    <p class="ion-padding">{{ mensajeOk }}</p>
  </ion-text>

  <!-- MENÚ PRINCIPAL -->
  <div class="menu-container" *ngIf="formActivo === null">
    <ion-button expand="block" (click)="formActivo = 'duenio'">
      ALTA DE DUEÑO / SUPERVISOR
    </ion-button>
    <ion-button expand="block" (click)="formActivo = 'empleado'">
      ALTA DE EMPLEADO
    </ion-button>
    <ion-button expand="block" (click)="formActivo = 'altaClientes'">
      APROBAR NUEVOS CLIENTES
    </ion-button>
  </div>

  <!-- FORMULARIO ALTA DUEÑO/SUPERVISOR -->
  <form *ngIf="formActivo === 'duenio'" [formGroup]="formDuenio" (ngSubmit)="guardarDuenio()" class="formulario">
    <ion-item><ion-input formControlName="apellido" placeholder="Apellido"></ion-input></ion-item>
    <ion-item><ion-input formControlName="nombre" placeholder="Nombre"></ion-input></ion-item>
    <ion-item><ion-input type="number" formControlName="dni" placeholder="DNI"></ion-input></ion-item>
    <ion-item><ion-input formControlName="cuil" placeholder="CUIL"></ion-input></ion-item>
    <ion-item><ion-input type="email" formControlName="email" placeholder="Correo electrónico"></ion-input></ion-item>
    <ion-item><ion-input type="password" formControlName="password" placeholder="Contraseña"></ion-input></ion-item>
    <ion-item><ion-input type="password" formControlName="confirmar" placeholder="Confirmar contraseña"></ion-input></ion-item>

    <ion-list>
      <ion-radio-group formControlName="rol">
        <ion-item>
          <ion-label>Dueño</ion-label>
          <ion-radio slot="start" value="dueño"></ion-radio>
        </ion-item>
        <ion-item>
          <ion-label>Supervisor</ion-label>
          <ion-radio slot="start" value="supervisor"></ion-radio>
        </ion-item>
      </ion-radio-group>
    </ion-list>

    <ion-button expand="block" type="submit" color="success">GUARDAR</ion-button>
    <ion-button fill="clear" color="medium" (click)="formActivo = null">VOLVER</ion-button>
  </form>

  <!-- FORMULARIO ALTA EMPLEADO -->
  <form *ngIf="formActivo === 'empleado'" [formGroup]="formEmpleado" (ngSubmit)="guardarEmpleado()" class="formulario">
    <ion-item><ion-input formControlName="nombre" placeholder="Nombre"></ion-input></ion-item>
    <ion-item><ion-input formControlName="apellido" placeholder="Apellido"></ion-input></ion-item>
    <ion-item><ion-input type="number" formControlName="dni" placeholder="DNI"></ion-input></ion-item>
    <ion-item><ion-input formControlName="cuil" placeholder="CUIL"></ion-input></ion-item>
    <ion-item><ion-input type="email" formControlName="email" placeholder="Correo electrónico"></ion-input></ion-item>
    <ion-item><ion-input type="password" formControlName="password" placeholder="Contraseña"></ion-input></ion-item>
    <ion-item><ion-input type="password" formControlName="confirmar" placeholder="Confirmar contraseña"></ion-input></ion-item>

    <ion-list>
      <ion-radio-group formControlName="rol">
        <ion-item>
          <ion-label>Meitre</ion-label>
          <ion-radio slot="start" value="meitre"></ion-radio>
        </ion-item>
        <ion-item>
          <ion-label>Mozo</ion-label>
          <ion-radio slot="start" value="mozo"></ion-radio>
        </ion-item>
        <ion-item>
          <ion-label>Cocinero</ion-label>
          <ion-radio slot="start" value="cocinero"></ion-radio>
        </ion-item>
        <ion-item>
          <ion-label>Bartender</ion-label>
          <ion-radio slot="start" value="bartender"></ion-radio>
        </ion-item>
      </ion-radio-group>
    </ion-list>

    <ion-button expand="block" type="submit" color="success">GUARDAR</ion-button>
    <ion-button fill="clear" color="medium" (click)="formActivo = null">VOLVER</ion-button>
  </form>

  <!-- APROBACIÓN DE NUEVOS CLIENTES -->
  <div *ngIf="formActivo === 'altaClientes'" class="clientes-pendientes-container">

    <ion-button fill="clear" (click)="formActivo = null">
      <ion-icon name="arrow-back-outline"></ion-icon>
      VOLVER
    </ion-button>

    <div *ngFor="let cliente of clientesPendientes" class="card-cliente">

      <img [src]="cliente.imagen || 'assets/icons/avatar_placeholder.png'" class="imagen-cliente" />

      <div class="acciones">
        <ion-button color="success" shape="round" size="small" (click)="aprobarCliente(cliente)">
          ✅
        </ion-button>
        <ion-button color="danger" shape="round" size="small" (click)="rechazarCliente(cliente)">
          ❌
        </ion-button>
      </div>

      <div class="datos">
        <p><strong>CORREO:</strong> {{ cliente.email }}</p>
        <p><strong>NOMBRE:</strong> {{ cliente.nombre }}</p>
        <p><strong>APELLIDO:</strong> {{ cliente.apellido }}</p>
        <p><strong>DNI:</strong> {{ cliente.dni }}</p>
        <p><strong>CREACIÓN:</strong> {{ cliente.created_at | date: 'dd/MM/yyyy HH:mm:ss' }} hs</p>
      </div>

    </div>
  </div>

</ion-content>
