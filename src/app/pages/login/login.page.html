<ion-content [fullscreen]="true">
  <form [formGroup]="loginForm" class="contenedor-flex">
    <!-- Logo -->
    <ion-card class="imagen-card">
      <img src="../assets/logo_splash.png" alt="logo_kinetico" />
    </ion-card>

    <!-- ✅ Mensajes de éxito / error -->
    <ion-text *ngIf="mensajeExito" class="mensaje-confirmacion">
      <p class="ion-padding">{{ mensajeExito }}</p>
    </ion-text>

    <ion-text *ngIf="mensajeError" class="mensaje-rechazo">
      <p class="ion-padding">{{ mensajeError }}</p>
    </ion-text>

    <!-- Formulario -->
    <ion-card class="login-card">
      <ion-card-header></ion-card-header>
      <ion-card-content>
        <!-- Email -->
        <div class="input-group">
          <ion-item>
            <ion-input
              type="email"
              formControlName="email"
              placeholder="Correo electrónico"
            ></ion-input>
          </ion-item>
          <div
            class="error-tooltip"
            *ngIf="loginForm.get('email')?.touched && loginForm.get('email')?.invalid"
          >
            <span *ngIf="loginForm.get('email')?.hasError('required')"
              >El correo es obligatorio</span
            >
            <span *ngIf="loginForm.get('email')?.hasError('email')"
              >Formato de correo inválido</span
            >
          </div>
        </div>

        <!-- Password -->
        <div class="input-group">
          <ion-item>
            <ion-input
              [type]="verPassword ? 'text' : 'password'"
              formControlName="password"
              placeholder="Clave secreta"
            ></ion-input>
            <ion-button
              fill="clear"
              slot="end"
              (click)="verPassword = !verPassword"
            >
              <ion-icon [name]="verPassword ? 'eye-off' : 'eye'"></ion-icon>
            </ion-button>
          </ion-item>
          <div
            class="error-tooltip"
            *ngIf="loginForm.get('password')?.touched && loginForm.get('password')?.invalid"
          >
            La contraseña es obligatoria
          </div>
        </div>

        <!-- Botones -->
        <div class="boton-container">
          <ion-button
            expand="block"
            color="danger"
            (click)="loguearse()"
            [disabled]="loginForm.invalid"
          >
            <ion-icon name="grid-sharp"></ion-icon>
          </ion-button>

          <ion-button expand="block" color="warning" (click)="irARegistro()">
            REGISTRARSE
          </ion-button>
        </div>
      </ion-card-content>
    </ion-card>

    <!-- Botón inicio rápido -->
    <ion-button expand="block" color="warning" (click)="mostrarUsuarios = true">
      INICIO RÁPIDO
    </ion-button>
  </form>

  <!-- ✅ Overlay usuarios rápidos -->
  <div *ngIf="mostrarUsuarios" class="overlay-usuarios">
    <ion-button
      fill="clear"
      color="dark"
      (click)="mostrarUsuarios = false"
      class="cerrar-btn"
    >
      ❌
    </ion-button>

    <div class="lista-usuarios">
      <div
        class="usuario-card"
        *ngFor="let u of usuarios"
        (click)="autocompletar(u.email, u.pass)"
      >
        <img [src]="u.img" alt="{{ u.nombre }}" />
        <p>{{ u.nombre }}</p>
      </div>
    </div>
  </div>
</ion-content>
